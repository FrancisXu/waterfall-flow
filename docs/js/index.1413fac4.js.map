{"version":3,"sources":["webpack:///./src/views/index.vue?77b8","webpack:///src/views/index.vue","webpack:///./src/views/index.vue?5c54","webpack:///./src/views/index.vue","webpack:///./src/views/index.vue?ec37"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","image","index","attrs","src","url","alt","_v","directives","name","rawName","value","expression","staticRenderFns","viewsvue_type_script_lang_js_","data","tempImage","imageHeight","imageWidth","imageList","footerVisible","pagination","currentPage","totalPage","pageSize","available","components","computed","mounted","getImagePage","document","querySelector","offsetWidth","window","addEventListener","pullDown","methods","pushImage","_this","length","img","Image","that","onload","min","imageIndex","forEach","_index","naturalHeight","naturalWidth","push","height1","pageYOffset","documentElement","scrollTop","body","height2","scrollHeight","height3","compatMode","clientHeight","src_viewsvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_6e6b1595_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_6_0_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_6e6b1595_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/index.1413fac4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image\"},[_c('div',{staticClass:\"waterfall\"},_vm._l((_vm.imageList),function(item){return _c('div',{staticClass:\"column\"},_vm._l((item),function(image,index){return _c('div',{staticClass:\"column-item\"},[_c('img',{staticClass:\"img\",attrs:{\"src\":'https://francisxu.github.io/waterfall-flow/images/'+image.url,\"alt\":\"\"}}),_c('p',{staticClass:\"date\"},[_vm._v(\"20 nov, 2016\")]),_c('h5',{staticClass:\"title\"},[_vm._v(\"Auto-resized image\")]),_c('h6',{staticClass:\"content\"},[_vm._v(\"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, \")])])}),0)}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.footerVisible),expression:\"footerVisible\"}],staticClass:\"footer\"},[_c('h5',[_vm._v(\"我是有底线的\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"image\">\n        <div class=\"waterfall\">\n            <div class=\"column\" v-for=\"item in imageList\">\n                <div class=\"column-item\" v-for=\"(image,index) in item\">\n                    <img class=\"img\" :src=\"'https://francisxu.github.io/waterfall-flow/images/'+image.url\"\n                         alt=\"\">\n                    <p class=\"date\">20 nov, 2016</p>\n                    <h5 class=\"title\">Auto-resized image</h5>\n                    <h6 class=\"content\">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, </h6>\n                </div>\n            </div>\n        </div>\n        <div class=\"footer\" v-show=\"footerVisible\">\n            <h5>我是有底线的</h5>\n        </div>\n    </div>\n</template>\n<script>\n\n    export default {\n        data() {\n            return {\n                tempImage: [],\n                imageHeight: [0, 0, 0],\n                imageWidth: 0,\n                imageList: [[], [], []],\n                footerVisible: false,\n                pagination: {\n                    currentPage: 1,\n                    totalPage: 10,\n                    pageSize: 10,\n                    available: true,\n                }\n            };\n        },\n        components: {},\n        computed: {},\n        mounted() {\n            this.getImagePage();\n            this.imageWidth = document.querySelector(\".waterfall>.column\").offsetWidth;\n            window.addEventListener(\"scroll\", this.pullDown);\n        },\n        methods: {\n            getImagePage() {\n                this.tempImage = [\n                    {url: \"image1.jpg\"},\n                    {url: \"image2.jpg\"},\n                    {url: \"image3.jpg\"},\n                    {url: \"image4.jpg\"},\n                    {url: \"image5.jpg\"},\n                    {url: \"image6.jpg\"},\n                    {url: \"image7.jpg\"},\n                    {url: \"image8.jpg\"},\n                ];\n                this.pushImage(0);\n            },\n\n            pushImage(index) {\n                if (index >= this.tempImage.length) return;\n                let img = new Image(), that = this;\n                img.src = \"https://francisxu.github.io/waterfall-flow/images/\" + that.tempImage[index].url;\n                img.onload = () => {\n                    let min = that.imageHeight[0], imageIndex = 0;\n                    that.imageHeight.forEach(function (item, _index) {\n                        if (min > item) {\n                            min = item;\n                            imageIndex = _index;\n                        }\n                    });\n                    that.imageHeight[imageIndex] += img.naturalHeight / img.naturalWidth + 96 / this.imageWidth;\n                    that.imageList[imageIndex].push(that.tempImage[index]);\n                    that.pushImage(index + 1);\n                }\n            },\n\n            pullDown() {\n                // 获取滚轮位置\n                this.height1 = window.pageYOffset ||\n                    document.documentElement.scrollTop ||\n                    document.body.scrollTop;\n                // 文档高度\n                this.height2 = document.body.scrollHeight;\n                // 可视区域\n                // 设置compatMode兼容IE\n                this.height3 = document.compatMode === \"CSS1Compat\"\n                    ? document.documentElement.clientHeight\n                    : document.body.clientHeight;\n                // 如果滚动到最低（这里设置离最底还有100距离才触发函数）\n                // available条件是为了防止触底时一直不断地请求。因此，请求一次后available设为0，直到滚动到离底部超过100距离（即数据加载玩后）才设为1\n                if (this.height3 + this.height1 >= this.height2 - 100 && this.available) {\n                    this.available = false;\n                    //请求下一页,如果当前页等于最大页，直接返回\n                    if (this.pagination.currentPage >= this.pagination.totalPage) {\n                        this.footerVisible = true;\n                        return;\n                    }\n                    this.pagination.currentPage++;\n                    this.getImagePage();\n                } else if (this.height3 + this.height1 < this.height2 - 100) {\n                    this.available = true;\n                }\n            }\n        }\n    }\n</script>\n<style lang=\"scss\" scoped>\n    @import \"../style/common/var\";\n\n    .image {\n        padding-top: $header-height;\n    }\n\n    .waterfall {\n        margin-top: $space-medium;\n        display: flex;\n        max-width: 1280px;\n        width: 90%;\n        margin-left: auto;\n        margin-right: auto;\n        .column {\n            width: 33.33%;\n            .column-item {\n                width: 100%;\n                padding: $space-small;\n                img {\n                    width: 100%;\n                    height: 100%;\n                }\n                .date {\n                    margin-bottom: $space-small;\n                }\n                .title {\n                    margin-bottom: $space-small;\n                }\n                .content {\n                    margin-bottom: $space-small;\n                }\n            }\n        }\n    }\n\n    .footer {\n        width: 100%;\n        height: 80px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border-top: $border-medium;\n        color: $font-color-primary;\n        margin-top: $space-medium;\n    }\n</style>","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6e6b1595&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6e6b1595&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e6b1595\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6e6b1595&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6e6b1595&lang=scss&scoped=true&\""],"sourceRoot":""}